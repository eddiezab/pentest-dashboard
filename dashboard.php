<?php

$home = ""

function random_pic()
{
	$files = array();
	
	foreach (glob("screenshots/*", GLOB_ONLYDIR) as $dir)
	{
		$files = array_merge($files, glob($dir ."/*.*"));
	}
	return $files[array_rand($files)];
}

$hackers = array();

$handle = fopen($home . "/scripts/shell/.scores", "r");

while (($buffer = fgets($handle, 1024)) !== false)
{
	$userScore = explode(":", $buffer);
	$hackers[$userScore[0]] = $userScore[1];
}

$cortana_handle = fopen($home . "/cortana-bots/ez-bots/.cortana_data", "r");
$cortana_data = array();

while (($buffer = fgets($cortana_handle, 1024)) !== false)
{
	$data = explode(":", $buffer);
	$cortana_data[$data[0]] = $data[1];
}

echo json_encode(array(
	"hackers" => $hackers,
	"screenshot" => random_pic(),
	"cortana-data" => $cortana_data
));

?>
